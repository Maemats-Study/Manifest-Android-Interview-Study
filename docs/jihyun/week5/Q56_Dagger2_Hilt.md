# dagger 2와 Hilt의 차이점

- 안드로이드 개발을 위한 의존성 주입 라이브러리에는 다양한 선택지가 있지만, 그 중 가장 대표적인 것은 Dagger2와 Hilt
- 두 라이브러리 모두 Google에서 개발하고 공식적으로 지원
- 대규모 프로젝트에서 사용성이 많이 검증됨

## Dagger 2란?

- 안드로이드 및 JVM 환경을 위한 정적 컴파일 타임 기바의 의존성 주입(DI) 라이브러리
- 객체 생성을 관리하고 의존성을 자동으로 제공 → 모듈성을 개선, 애플리케이션 테스트를 용이하게 함
- 컴파일 타임에 코드를 생성 → 리플레기션에 기반한 DI 프레임워크에 비해 더 나은 성능을 보장
- @Module, @Provides, @Inject와 같은 어노테이션을 사용하여 의존성을 선언하고 요청
- 개발자는 컴포넌트와 모듈을 통해 의존성 그래프를 생성, Dagger 2는 런타임에 이를 자동으로 해결

## Hilt란?

- Hilt는 Dagger 2 위에 구축된 안드로이드 전용 의존성 주입 라이브러리
- Activity, Fragment, ViewModel과 같이 안드로이드 생명주기와 밀접한 관련이 있는 클래스에 스코프가 지정되니 사전 정의된 컴포넌트를 제공 → Dagger를 안드로이드 프로젝트에 통합하는 프로세스를 전체적으로 단순화함
- @HiltAndroidApp 및 @AndroidEntryPoint와 같은 어노테이션을 제공하여 DI 설정을 간소화 → Dagger 2에 필요한 많은 보일러 플레이트 코드를 제거
- @Singleton 및 @ActivityScoped와 같은 범위를 정의하여 의존성 생명주기를 관리
- Hilt로 구현이 가능한 것은 Dagger 2로도 모두 구현이 가능

## Dagger 2와 Hilt의 주요 차이점

1. 통합 프로세스
    - Dagger 2는 개발자가 컴포넌트와 인젝터를 수동으로 정의해야 하므로 장황한 보일러 플레이트 코드를 작성해야 할 수 있음
    - Hilt는 사전 정의된 컴포넌트와 생명주기에 스코핑된 어노테이션을 제공하여 이를 단순화함
2. 안드로이드 생명주기 통합
    - Hilt는 안드로이드에 특화되어 있음
        - Activity, Fragment, ViewModel과 같은 안드로이드 컴포넌트에 대한 내장 지원을 제공
    - Dagger2는 더 범용적이며 생명주기 인식 컴포넌트에 대한 수동적인 설정이 필요
3. 스코핑(Scoping)
    - Hilt는 @Singleton, @ActivityScoped, @FragmentScoped와 같이 안드로이드 생명주기 클래스와 밀접하게 통합된 사전 정의된 범위를 제공
    - Dagger2에서는 스코핑에 수동 설정 및 커스텀 어노테이션이 필요
4. 코드 단순성
    - Hilt는 많은 봉일러 플레이트 코드를 추상화하여 DI설정의 복잡성을 줄여 초보가 DI 라이브러리 사용을 더 쉽게 접근할 수 있도록 함
    - Dagger2는 유연하고 복잡한 구조에서 더 세밀하게 사용할 수 있지만, 개발자가 모든 컴포넌트와 관계를 수동으로 정의해야 함
5. 사용 사례
    - Dagger 2는 복잡하고 커스텀된 의존성 주입 그래프가 필요한 프로젝트에 적합
    - Hilt는 안드로이드 프로젝트를 위해 맞춤 설계되었으며 사용 편의성과 안드로이드 컴포넌트와의 통합에 중점을 둠

## Dagger 2 기반의 어노테이션 (Dagger에서 제공하고 Hilt에서도 사용)

1. @Inject
    - 의존성 주입을 위해 생성자, 피륻 또는 메서드에 표시
    - 의존성 주입을 실질적으로 요청하는 데 사용
2. @Provides
    - @Module 내에서 의존성 생성 메서드를 정의
    - Hilt와 Dagger 모두 이 어노테이션을 사용하여 객체를 제공
3. @Module
    - 클래스를 의존성 제공자 컨테이너로 선언
    - 모듈은 관련된 의존성 생성 로직을 그룹화
4. @Binds
    - @Module 내에서 인터페이스를 구현에 매핑하는 데 사용
    - 의존성 정의 시 보일러 플레이트 코드를 줄임
5. @Qualifier
    - 커스텀 어노테이션을 사용하여 동일한 타입에 대해 여러 의존성 바인딩을 구별
6. @Scope
    - 특정 의존성의 생명주기를 제어하기 위해 커스텀 스코핑 어노테이션을 정의할 수 있음
7. @Singleton
    - 의존성이 해당 범위(일반적으로 앱 생명주기) 내내 단일 공유 인스턴스를 가져야 함을 지정
8. @Component
    - 의존성 그래프의 인터페이스를 정의
    - @Component는 모듈을 주입 대상에 연결하고 의존성 생명주기를 제어
9. @Subcomponent
    - 지정한 범위 내에서 의존성을 관리하기 위한 케이스를 위해 @Component 내에 더 작은 의존성 그래프를 생성
    - 종종 자체 생명주기를 가진 자식 컴포넌트를 만드는 데 사용

## Hilt에 특화된 어노테이션

1. @HiltAndroidApp
    - Hilt를 부트스트랩하고 전체 앱에 대한 의존성 그래프를 생성하기 위해 사용
    - Application 클래스에 사용할 수 있음
    - Hilt를 초기화하기 위한 필수 어노테이션
2. @AndroidEntryPoint
    - 안드로이드 컴포넌트를 주입 대상으로 마크
    - 해당 어노테이션을 사용하는 것만으로도 커스텀 Dagger 컴포넌트를 정의할 필요가 없음
3. @InstallIn
    - @Module이 설치되어야 하는 컴포넌트를 지정
4. @EntryPoint
    - Hilt에서 관리하는 안드로이드 컴포넌트가 아닌 외부에서 의존성에 접근하기 위한 진입정을 정의하는 데 사용
5. @HiltViewModel
    - Jetpack ViewModel을 Hilt와 통합하기 위한 특수 어노테이션
    - ViewModel이 생명주기를 인식하면서 Hilt의 의존성 주입을 사용할 수 있도록 보장
    - @HiltViewModel 어노테이션은 생성자에 @Inject와 함께 사용해야 함
6. Scop Annotations
    - @ActivityRetainedScoped
    - @ViewModelScoped
    - @ActivityScoped
    - @FragmentScoped
    - @ViewScoped
    - @ServiceScoped
    - 사용자가 컴포넌트를 수동으로 정의하고 인스턴스화하는 순수 Dagger와 달리, Hilt는 사전 정의된 컴포넌트를 제공 → 특정 라이프 사이클에 의존성을 바인딩하는 프로세스를 단순화
    - Hilt에는 Hilt에 특화된 컴포넌트 뿐만 아니라, 스코프 지정 어노테이션들의 포함되어 있어 의존성 주입을 더 간소화하고 안드로이드 생명주기에 따라 의존성을 관리하기 쉽도록 함