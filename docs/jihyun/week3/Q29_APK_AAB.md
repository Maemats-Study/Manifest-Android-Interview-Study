# APK 파일과 AAB 파일

안드로이드 애플리케이션은 두 가지 기본 포맷인 APK(Android Package)와 AAB(Android App Bundle)를 사용하여 배포 및 설치할 수 있음

- 두 포맷 모두 안드로이드 앱을 패키징하는 역할
- 목적, 구조, 설치 리소스 처리 방식에서 차이 있음

## APK (Android Package)

<aside>

안드로이드 애플리케이션을 배포하고 설치하는 전통적인 포맷

- 앱이 기기에서 작동하는 데 필요한 모든 리소스, 코드 및 메타데이터를 포함하는 완전하고 즉시 설치 가능한 패키지
</aside>

- 모든 기기 구성(화면 밀도, CPU 아키텍처, 언어 등)에 대한 모든 리소스를 포함 → 안전함
    - 사용자의 기기와 관련 없는 리소스를 포함하게 되어 파일 크기가 커질 수 있음
- 기기에 직접 설치되며 공식 앱 스토어 외부에서 공유하거나 사이드로딩할 수 있음
    - 개발자는 다양한 기기에 대한 구성을 관리할 책임이 있음
    - APK에는 특정 기기에 불필요한 리소스가 종종 포함됨

## AAB (Android App Bundle)

<aside>

APK와 같은 설치 가능한 형식이 아닌 게시 포맷 (Google에서 도입)

- 개발자는 AAB를 Google Play에 업로드하면, Google Play는 이를 개별 기기에 맞게 최적화된 APK 로 처리
</aside>

- 모듈식: 다른 구성에 대한 리소스와 코드를 별개의 번들로 분리
    - Google Play는 이 모듈식 구조를 사용하여 다운로드 시점에 기기별 APK를 생성
    - 특정 화면 크기, CPU 아키텍처 및 언어에 필요한 리소스와 코드만 전달 → 사용자 기기의 앱 크기를 줄임
- Google Play 서버 측에서 처리되므로 직접 설치할 수 없음
    - 개발자는 bundletool 유틸리티와 같은 추가 도구 없이 AAB 파일을 사용자에게 직접 배포하여 설치하도록 사이드로딩을 유도할 수 없음

## APK와 AAB의 주요 차이점

1. 목적 및 구조
    - APK: 모든 구성에 대한 모든 리소스와 코드를 포함하는 완전한 패키지
    - AAB: 기기별 APK를 생성하는 모듈식 게시 형식
2. 파일 크기
    - APK: 모든 기기에 대한 리소스를 포함하여 크기가 더 큼
    - AAB: 더 작고 최적화된 APK를 생성 → 앱 크기를 줄임
3. 배포
    - APK: 기기에 직접 공유하고 사이드로딩 가능
    - AAB: Google Play에 업로드 → Google Play가 최종 사용자를 위해 최적화된 APK를 생성
4. 관리
    - APK: 개발자가 리소스와 구성을 수동으로 관리
    - AAB: 구성 관리를 Google Play에 위임 (프로세스 자동화)
5. 도구 및 호환성
    - APK: 모든 안드로이드 기기 및 앱 스토어에서 지원
    - AAB: 설치 가능한 APK를 생성하기 위해 Google Play 또는 bundletool이 필요. 기본적으로 Google 외 앱 스토어와 호환되지 않음