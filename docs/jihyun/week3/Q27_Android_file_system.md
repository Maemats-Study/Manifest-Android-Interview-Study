# 안드로이드 파일 시스템이란?

<aside>

안드로이드 기기에서 데이터 저장을 관리하고 구성하는 구조화된 환경

- 애플리케이션과 사용자가 파일을 효율적으로 저장, 검색 및 관리할 수 있도록 함
- 파일 시스템은 리눅스의 파일 시스템 아키텍처 위에 구축 → 엄격한 보안 및 권한 모델을 준수하면서 애플리케이션을 위한 비공개 및 공유 저장 공간을 모두 제공
</aside>

## 안드로이드 파일 시스템의 주요 구성 요소

- System Partiton (/system)
    - 안드로이드 프레임워크 라이브러리, 시스템 앱 및 구성 파일을 포함한 핵심 운영 체제 파일
    - 우발적이거나 악의적인 수정을 방지하기 위해 일반 사용자 및 앱에 대해 읽기 전용
- Data Partition (/data)
    - 데이터베이스, SharedPreferences 및 사용자가 생성한 파일을 포함한 앱별 데이터가 저장됨
    - 각 앱은 /data/data 내에 해당 앱만 접근할 수 있는 비공개 디렉토리를 가짐 → 보안 보장
- Cache Partition (/cache)
    - 시스템 업데이트나 기기 재시작 시 유지할 필요가 없는 캐시된 파일과 같은 임시 데이터 저장에 사용됨
- External Storage (/sdcard 또는 /storage)
    - 여러 앱에서 접근할 수 있는 공유 저장 공간을 제공
    - 이미지, 비디오, 문서와 같은 미디어 파일에 자주 사용됨
    - 내부 또는 이동식 SD 카드일 수있음
- Temporary Files (/tmp)
    - 앱 실행 중 임시 파일을 저장하는 위치
    - 일반적으로 앱이나 시스템이 재시작될 때 지워짐

## 안드로이드에서 파일 접근하기

- 애플리케이션은 안드로이드 프레임워크에서 제공하는 API를 사용하여 파일 시스템과 상호작용
- 필요한 파일 가시성 및 수명에 따라 앱은 파일을 다른 위치에 저장할 수 있음
    - 내부 저장소 (Internal Storage)
        - 애플리케이션 샌드박스 내의 비공개 저장 공간
        - 해당 앱만 접근 가능
        - 민감하거나 앱별 데이터 저장에 이상적
    - 외부 저장소 (External Storage)
        - 여러 앱에서 접근할 수 있는 공유 저장 공간
        - 사용자가 앱 외부에서 접근할 것으로 예상하는 사용자 생성 콘텐츠 또는 미디어를 저장

## 파일 권한 및 보안

안드로이드 파일 시스템은 엄격한 권한 모델을 적용

- 비공개 앱 데이터
    - 앱의 내부 저장소에 저장된 파일은 비공개
    - 해당 앱만 접근 가능
- 공유 파일
    - 앱 간에 파일을 공유하려면 개발자는 외부 저장소나 적절한 권한이 있는 ContentProvider를 사용할 수 있음
- 범위 지정 저장소 (Scoped Storage)
    - 안드로이드 10에서 도입
    - 공유 저장소에 대한 직접거인 접근을 제한 → 앱이 MediaStore 또는 SAF(Storage Access Framework) APi를 사용하도록 요구