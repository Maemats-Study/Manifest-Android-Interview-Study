Q23) Looper, Handler , HandlerThread 의 역할은 무엇인가요?

Looper , HandlerThread는 스레드를관리하고 비동기 통신을 처리하가ㅣ 위해 함께 작동하는 컴포넌트입니다. 이들은 백그라운드 스레드에서 작업을 수행하면서 UI 업데이트를 위해 메인 스레드와 상호작용하기 위한 필수적인 컴포넌트입니다.

![image.png](attachment:9635fc7f-f7a1-489d-ac8d-230391ba6f3b:image.png)

**Looper 는** 스레드를 살아있게 유지하여 메세지 또는 작업 큐를 순차적으로 처리하는 안드로이드 스레딩 모델의 일부입니다. 이는 안드로이드의 메인 스레드 (UI 스레드 ) 및 다른 워커 스레드에서 중식적인 역할을 합니다.

- 목적 : 메세지 큐를 지속적으로 모니터링하고 메세지나 작업을 적잘한 핸들러에 가져와 디스패치합니다.
- 사용법 : 스헤드에는 자동으로 Looper 가 있지만, 워커 스레드의 경우 명시적으로 준비해야 합니다.
- 초기화 : Looper.prepare()를 사용하여 스레드에 Looper 를 연결하고 Looper.loop() 를 사용하여 루프를 시작합니다.

**Handler**
Handler는 스레드의 메시지 큐 내에서 메시지나 작업을 보내고 처리하는데 사용됩니다. Looper와 함께 작동합니다.
• 목적: 한 스레드에서 다른 스레드로 작업이나 메시지를 전달합니다 (가령, 백그라운드 스레드에서 UI 업데이트 하기).
• 동작: Handler가 생성될 때, 생성된 스레드 및 해당 스레드의 Looper에 연결됩니다. Handler로 전송된 작업은 해당 스레드에서 처리됩니다.

**HandlerThread**
HandlerThread는 내장된 Looper를 가진 특수한 Thread입니다. 작업 또는 메시지 큐를 처리할 수 있는 백그라운드 스레드를 생성하는 과정을 단순화합니다.
• 목적: 자체 Looper를 가진 워커 스레드를 생성하여 해당 스레드에서 작업을 순차적으로 처리할 수 있도록 합니다.
• 생명주기: start()로 HandlerThread를 시작한 다음 getLooper()를 사용하여 Looper를 얻습니다. 리소스를 해제하려면 항상 quit() 또는 quitSafely()를 사용하여 Looper를 종료해야 합니다.

주요 차이점 및 관계

1. Looper: 메시지 처리의 중추이며, 스레드를 살아있게 유지하고 메시지 큐를 처리합니다.
2. Handler: Looper와 상호 작용하여 메시지와 작업을 큐에 넣거나 처리합니다.
3. HandlerThread: 자동 Looper 설정으로 백그라운드 스레드 생성을 단순화합니다.
사용 사례
• Looper: 메인 스레드 또는 워커 스레드에서 연속적인 메시지 큐를 관리하는 데 사용됩니다.
• Handler: 스레드 간 통신(가령, 백그라운드 스레드에서 UI 업데이트)에 이상적입니다.
• HandlerThread: 데이터 처리나 네트워크 요청과 같이 전용 스레드가 필요한 백그라운드 작업에 적합합니다.