# Q 42) DP 와 SP 의 차이점은 무엇인가요?

안드로이드 사용자 인터페이스를 디자인할 때 UI 컴포넌트가 다양한 화면 크기와 해상도에 어떻게 적응하는지 고려해야 합니다. 이를 위해 사용되는 필수적인 개념에는 Dp (Density‑independent Pixels) 와 Sp
(Scale‑independent Pixels) 가 있습니다. 둘 다 기기 간 일관성을 보장하는 데 도움이 되지만 다른 목적을 가지고 있습니다

## Dp란 무엇인가?

Dp (Density‑independent Pixels) 는 패딩, 마진, 너비와 같은 UI요소의 측정 단위입니다. 다양한 화면 밀도를 가진 기기에서 UI 컴포넌트의 일관된 물리적 크기를 제공하도록 설계되었습니다. 1 Dp는 160DPI(인치당 도트 수) 화면의 물리적 픽셀 1개와 같으며, 안드로이드는 기기 밀도에 맞게 Dp를 자동으로 조절합니다.
예를 들어, Button 너비를 100dp로 지정하면 저밀도 및 고밀도 화면 모두에서 대략 동일한 크기로 표시되지만 이를 렌더링하는 데 필요한픽셀 수는 다릅니다.
→ 근데 xml 할때 margin 값 sp 로 줘도 되던데

## Sp란 무엇인가?

Sp (Scale‑independent Pixels) 는 텍스트 크기에만 사용됩니다. Dp와 유사하게 작동하지만 사용자의 글꼴 크기 환경 설정을 추가로 고려합니다. 즉, Sp는 화면 밀도와 기기의 접근성 설정 모두를 기반으로 텍스트 크기를 조절하므로 읽기 쉽고 접근 가능한 텍스트를 보장하는데 이상적입니다.
예를 들어, TextView를 16sp로 설정하면 화면 밀도에 맞게 적절하게 크기가 조절되고 사용자가 시스템 글꼴 크기를 늘린 경우에도 조정됩니다

**Dp와 Sp의 주요 차이점 :** 주요 차이점은 크기 조절 동작입니다.

1. 목적: Dp는 크기(예: 버튼 크기, 패딩)에 사용하고 Sp는 텍스트 크기에 사용합니다.
2. 사용자 정의 환경: Sp는 사용자가 정의한 글꼴 크기 환경 설정을 존중하지만 Dp는 그렇지 않습니다.
3. 밀도 보장성: 둘 다 화면밀도에따라크기가조절되지만Sp는모든 사용자가 텍스트를 접근 가능하고 읽을 수 있도록 보장합니다.

기기 간 일관된 레이아웃을 유지하려면 View 크기, 마진, 패딩과 같은 UI 컴포넌트에 Dp를 사용해야 합니다. 텍스트의 경우, 시각적 일관성을 유지하면서 사용자 환경 설정을 존중하기 위해 Sp를 사용합니다. 특히 텍스트 개발에서, 각 차이점을 올바르게 이해하고 사용함으로써 시각적으로 안정성이 보장되고 접근성을 올바르게 지원하는 안드로이드 앱을 만들 수 있습니다

** SP 단위를 사용할 때 화면 꺠짐을 어덯게 처리하나요?

SP(Scale-independent Pixels) 를 사용하는 것은 화면 밀도와 사용자 글꼴 환경 설정에 따라 크기가 조절되므로 안드로이드에서 텍스트 접근성을 보장하는 데 중요합니다. 그러나 사용자가 정의한 큰 글꼴 크기로 인한 과도한 크기 조절은 UI 컴포넌트가 겹치거나 화면을 벗어나는 레이아웃 깨짐 문제로 이어질 수 있습니다. 사용자 친화적인 경험을 유지하려면 이러한 시나리오를 적잘하게 처리하는 것이 필수다.

---

1. **콘텐츠를 적절하게 감싸기 (Wrap Content Properly)**

 TextView나 Button과 같은 텍스트 기반 컴포넌트의 크기가 wrap_content로 설정되었는지 확인합니다. 이렇게 하면 컨테이너가 텍스트 크기에 따라
동적으로 확장되어 텍스트 잘림이나 오버플로우를 피할 수 있습니다.

**2. TextView에 minLines 또는 maxLines 사용하기**

 텍스트 확장 동작을 제어하려면 minLines 및 maxLines 속성을 사용하여 레이아웃을 방해하지 않고 텍스트가 읽기 쉽게 유지되도록 합니다.
오버플로우를 올바르게 처리하려면 ellipsize와 결합합니다.

1. **중요한 UI 컴포넌트에 고정 크기 사용하기** 

일관된 크기가 필수적인 경우버튼과같은중요한컴포넌트에Dp 사용을 고려합니다. 이렇게 하면 사용자 환경 설정에 의한 텍스트 크기 조절에 관계없이 컴포넌트 크기가 안정적으로 유지됩니다. 또는, 컴포넌트 깨짐을 최소화하기 위해 중요한 컴포넌트 내의 텍스트 크기에는 Sp를 신중하게 사용하는 것이 안전합니다.

1. **극단적인 글꼴 크기로 테스트하기** 

항상 기기 설정에서 사용할 수 있는 가장 큰 시스템 글꼴 크기로 앱을 테스트합니다. 깨지거나 겹치는 UI 컴포넌트를 식별하고 더 큰 텍스트를 올바르게 반영할 수 있도록 레이아웃을 다듬습니다.

1. **제약 조건을 사용한 동적 크기 조절 고려하기**

ConstraintLayout을 사용하여 컴포넌트 위치 지정 및 크기 조절에 유연성을 더합니다. 텍스트가 확장될 때도 다른 UI 요소와 겹치지 않도록 텍스트 요소에 대한 제약 조건을 정의합니다

1. **Sp 대신 Dp 크기 사용하기**

이는 팀의 접근 방식에 따라 호불호가 갈릴 수 있습니다. 일부 회사는 사용자 조정 글꼴 크기로 인한 레이아웃 문제를 방지하기 위해 텍스트 크기에 Sp 대신 Dp를 사용하는 경우도 더러 있습니다. 그러나 Sp는 접근성을 지원하도록 따로 설계되어 사용자의 가독성 환경 설정에 따라 텍스트가 조정되도록 보장하기 때문에, Sp 대신 Dp를 사용하는 접근 방식은 사용자 경험을 저해할 수 있습니다.

## XML에서 margin/padding에 sp를 쓸 수 있었던 이유

**기술적으로는 가능했지만, 사실 권장사항이 아님**

```kotlin
<TextView
    android:layout_margin="16sp"   <!-- 가능했지만 권장 X -->
    android:padding="8sp"          *<!-- 가능했지만 권장 X -->*
    android:textSize="14sp" />     *<!-- 이건 권장 O -->*
```

**왜 가능했냐면:**

- XML은 타입 시스템이 느슨함 (모든 값이 문자열)
- 안드로이드가 런타임에 "16sp"를 파싱할 때 그냥 픽셀로 변환만 함
- 제약이 약해서 개발자가 원하면 뭐든 쓸 수 있었음

## 하지만 sp를 padding/margin에 쓰면 문제가 생김

```kotlin
<Button
    android:padding="16sp"        // 문제 발생
    android:textSize="14sp" />
```

사용자가 **"설정 → 글씨 크기 → 크게"**로 바꾸면:

- 텍스트는 14sp → 20sp (140% 증가)
- padding도 16sp → 22.4sp (140% 증가)

**결과:**

- 버튼이 너무 커짐
- 레이아웃이 깨짐
- UI가 예측 불가능해짐

## Compose가 sp를 padding에 못 쓰게 막은 이유

**Compose는 타입 안정성을 강화했어요:**

```kotlin
*//  컴파일 에러 - 타입이 안 맞음*
Modifier.padding(16.sp)

*// 정상 - Dp 타입*
Modifier.padding(16.dp)

*// 정상 - TextUnit(sp) 타입*
Text(
    text = "안녕",
    fontSize = 14.sp
)
```

**Compose의 철학:**

1. **타입으로 의도를 명확히 표현**
    - `Dp` = 레이아웃 크기 (화면 밀도만 반응)
    - `TextUnit` (sp) = 텍스트 크기 (밀도 + 사용자 설정 반응)
2. **베스트 프랙티스를 강제**
    - XML에서는 권장사항이었다면
    - Compose에서는 컴파일러가 강제함
    - 실수를 원천 차단
3. **예측 가능한 UI**
    - padding/margin은 항상 일정하게 유지
    - 사용자가 글꼴 크기를 바꿔도 레이아웃은 안정적

![/assets/sp_dp.png](assets/sp_dp.png)