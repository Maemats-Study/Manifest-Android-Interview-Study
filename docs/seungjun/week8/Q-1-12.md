# Q) 12. 상태 호이스팅(state hoisting)으로 어떤 이점을
얻을 수 있나요?

상태 호이스팅(State Hositing) 은 상태를 상위 수준의 컴포저블 함수로 끌어 올리는 것으로 일종의 디자인 패턴을 의미합니다.

단방향 데이터 흐름 원칙을 따라 UI 를 더 쉽게 관리하고 확장 가능하게 만듭니다.

**State** : 부모 컴포저블에서 관리, 상태 호이스팅을 적용하려는 컴포저블은 상태를 가져서는 안된다.

**Events** or **Triggers** : onClick, onValueChange 와 같은 이벤트는 자식에서 값을 바꾸고 이를 부모로 전달 받는 형태로 업데이트, 자식 컴포저블에서 콜백 방식으로 해당 상태를 업데이트합니다.

이렇게 `Stateless` 한 상태를 유지하는 것이 중요합니다.

### 왜 Stateless 하게 유지해야하는가?

state hoisting 의 장점은 다음과 같습니다.

- Single source of truth: 단일 출처만을 보장하게할 수 있습니다. 상태가 얽히는 것을 예방합니다.
- Encapsulated: 캡슐화를 통해 상태 수정을 stateful 컴포저블에서만 조작합니다.
    - 상태가 없는 컴포저블은 테스트가 더 간단해집니다.
- Shareable: 여러 컴포저블에 상태를 공유 할 수 있습니다.

### 실전 질문

Q) 상태 호이스팅이 왜 컴포저블 함수의 재사용성과 테스트 용이성을 향상시키나요? 예시를 들어서 설명해 주세요.

- 상태 호이스팅은 컴포저블이 상태를 직접 관리하지 않고 값과 이벤트만 전달받게 하여 UI 표현에만 집중하게 만든다.
- 그 결과 컴포저블이 특정 로직이나 초기값에 종속되지 않아 다양한 화면과 상황에서 재사용이 쉬워진다.
- 또한 상태를 외부에서 주입할 수 있어 테스트 시 원하는 상태를 직접 설정할 수 있어 테스트가 단순하고 예측 가능해진다.

Q) 어떤 시나리오에서 상태 호이스팅을 사용하지 않고, 컴포저블 내부에 상태를 갖도록 하실 건가요? 해당 시나리오에서는 컴포저블에 상태를 갖도록 하는 것이 상태 호이스팅을 적용하는 것에 비해 어떤 장점을 갖나요?

**1️⃣ 해당 상태가 UI 내부에서만 의미를 갖는 경우**

예를 들어,

- 버튼의 pressed 상태
- 텍스트 필드의 포커스 여부
- 임시 애니메이션 진행 상태
- 토글의 열림/닫힘 여부

처럼 **외부에서 알 필요가 없고, UI 표현에만 국한된 상태**라면

굳이 상위로 상태를 끌어올리지 않고 컴포저블 내부에서 관리합니다.

**2️⃣ 재사용되거나 공유될 필요가 없는 상태인 경우**

상태가 다른 컴포저블과 공유되지 않고

외부 로직이나 비즈니스 규칙에 영향을 주지 않으며 특정 UI 구현에만 종속적인 경우

이런 상태까지 호이스팅하면 오히려 **불필요한 파라미터 증가와 구조 복잡도**만 높아집니다.

**3️⃣ 이 경우 컴포저블 내부 상태의 장점**

이러한 시나리오에서는 내부 상태를 사용하는 것이 다음과 같은 장점을 가집니다.

- **코드 단순성:** 상위 컴포저블에 불필요한 상태와 이벤트를 전달하지 않아도 됨
- **캡슐화:** UI 구현 세부사항을 컴포저블 내부에 숨길 수 있음
- **가독성:** “이 상태는 이 UI에만 쓰인다”는 의도가 코드에서 명확해짐

즉, 모든 상태를 호이스팅하는 것보다

**UI 전용 상태는 컴포저블 내부에 두는 편이 오히려 유지보수에 유리**합니다.