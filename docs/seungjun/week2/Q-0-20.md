# Q) 20. ActivityManager란 무엇인가요?
ActivityManager 는 기기에서 실행중인 Activity, 태스크(Task), 프로세스(Process) 에 대한
정보를 제공하고 관리하는 안드로이드 시스템 서비스

안드로이드 프레임워크의 일부로, 개발자가 앱 생명주기,
메모리 사용량 및 태스크 관리 측면과 상호 작용하고 제어할 수 있도록 합니다.

LeakCanary 오픈 소스 메모리 누수 감지 라이브러리도 내부적으로 메모리 상태 및
정보 추적을 위해 ActivityManager 를 사용합니다.

### 주요 역할
1. 태스크 및 Activity 정보:<br/>
ActivityManager 는 실행 중인 태스크, Activity 및 해당 스택 상태에 대한
세부 정보를 추적할 수 있습니다. 개발자가 앱 동작 및 시스템 리소스 사용량을 모니터링 하는데 도움 됩니다.
2. 메모리 관리:<br/>
앱 메모리 소비 및 시스템 전체 메모리 상태를 포함하여 심스템 전체 메모리 사용량에 대한 정보를 제공합니다.
3. 앱 프로세스 관리:<br/>
실행 중인 앱 프로세스 및 Service 에 대한 세부 정보를 추적하고 관리합니다.
4. 디버깅 진단:<br/>
힙 덤프 생성 또는 앱 프로파일링과 같이 디버깅을 위한 도구를 제공하여 성능 병목 현상이나 메모리 누수를
식별하는 데 도움이 될 수 있습니다.

### ActivityManager 에서 제공하는 메서드
- getRunningAppProcesses():<br/>
  기기에 현재 실행중인 프로세스 목록 반환, 각 프로세스의 PID, 프로세스 명, 중요도 등 정보 제공
- getMemoryInfo(ActivityManager.MemoryInfo memoryInfo):<br/>
사용 가능한 메모리, 임계 메모리, 기기가 메모리 부족 상태인지 여부를 확인 할 수 있습니다.
- killBackgroundProcesses(String packageName):<br/>
시스템 리소스를 확보하기 위해 지정된 앱의 백그라운드 프로세스를 종료합니다.
- isLowRamDevice():<br/>
기기가 저사양 RAM 으로 분류되는지 확인합니다.
- appNotResponding(String message):<br/>
테스트 목적으로 ANR 이벤트를 시뮬레이션합니다. 디버깅 중 ANR 상황에서 어떻게 동작하거나 응답하는지
이해하는데 사용될 수 있습니다.
- clearApplicationUserData():<br/>
파일, 데이터베이스 및 SharedPreferences 를 포함해 애플리케이션과 관련된 모든 사용자별 데이터를 지웁니다.

> ```kotlin
> getSystemService(Context.ACTIVITY_SERVICE) as ActivityManager
> ```
> 위와 같이 `getSystemService()` 를 호출하여 `ActivityManager` 에 접근할 수 있습니다.


### 실전 질문
Q) ActivityManager.getMemoryInfo()를 어떻게 앱 성능 최적화에
활용할 수 있으며, 시스템이 메모리 부족 상태에 들어가면 개발자는 어떤 조치를 취해야 하나요?

ActivityManager.getMemoryInfo()는 시스템 전체의 현재 메모리 상태를 확인하는 API로,
이를 통해 앱이 메모리를 관리하여 성능을 최적화할 수 있습니다. 

시스템이 메모리 부족 상태에 진입하면, 개발자는 `onLowMemory()`나 `onTrimMemory()` 콜백을
통해 불필요한 리소스를 즉시 해제하는 조치를 취해야 합니다.
