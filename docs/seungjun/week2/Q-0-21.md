# Q) 21. SparseArray를 사용하면 어떤 이점이 있나요?

SparseArray 는 HashMap 과 유사하게 정수 키를 객체 값에 매핑하는
안드로이드 SDK 표준 컬렉션입니다. android.util 패키지 안에 있으며,
기본적으로 자동 박싱 키를 피하고 각 매핑에 대해 추가 항목 객체에 의존하지 않는 데이터 구조를
가지고 있기 때문에  메모리 효율성이 더 높습니다.


### SparseArray 주요 특징
1. 메모리 효율성:<br/>
키-값 매핑을 위해서 HashTable 을 사용하는 HashMap 과는 다르게
SparseArray 는 오토박싱(int 를 Integer 로 변환)을 피하고 
HashMap 은 Entry 객체로 묶어 관리하면서 생긱는 메모리 낭비를 줄입니다.
2. 탐색 성능:<br/>
HashMap: 시간복잡도는 O(1) 이며, 해싱을 사용하여, 바로 계산해 데이터 양에 상관없이 값을 빠르게 찾습니다.<br/>
SparseArray: 시간복잡도는 O(log n) 이며, 이진탐색을 사용합니다.<br/>
3. null 키값 사용 불가:

매모리 효율성을 중요시 하고, 데이터가 작으나, 키가 넓은 정수 범위에 걸쳐 드문드문 분포된 데이터셋에 적합합니다.
특히, 안드로이드 UI 컴포넌트에서 View ID 객체에 매핑하는 등의 시나리오에 효과적입니다.


### SparseArray 의 한계
1. 성능 트레이드오프: SparseArray 의 요소 접근은 키 조회를 위해
   이진 탐색을 (binary search) 사용하기 때문에 매우 큰 데이터
   셋의 경우 HashMap 보다 느립니다.
2. 정수 키만 사용 가능: 정수 키로 제한되어 다른 유형의 키가
   필요한 사용 사례에는 적합하지 않습니다.

### 결론
1. 메모리 효율성 측면에서 `HashMap` 대신 `ArrayMap` 을 사용합니다.
2. `int` 를 키로 사용하는 경우 `sparseArray` 를 사용합니다.
3. `int`를 키로 사용하여 `Int/Long/Boolean` 을 값으로 사용하는 경우
`SparseArray` / `SparseLongArray` / `SparseBooleanArray` 를 사용합니다.
4. 가능한 경우 생성자 또는 `ensureCapacity` 함수로 고정된 크기를 설정합니다.

요소가 1000개 이상인 경우, ArrayMap / SparseArray 는 
HashMap 만큼 효율적이지 않지만, 모바일과 같이 리소스가 제한적인 상황에서 유용합니다.


### 실전 질문
Q) HashMap 대신 SparseArray를 사용하는 것이 어떤 시나리오에서 더
효율적이며, 성능 및 사용성 측면에서 트레이드오프는 무엇인가요?

- 메모리 중시: SparseArray
- 탐색 성능 중시: 데이터 셋이 1000개 이상인 경우 HashMap 사용
- 트레이드 오프: 메모리를 아끼는 대신 약간의 속도를 포기하는 해야합니다.