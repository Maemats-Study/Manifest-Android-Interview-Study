# Q) 2. PendingIntent의 목적은 무엇인가요?
`PendingIntent`는 `Intent` 래퍼(wrapper) 로, 앱 외부의 다른 주체(시스템, 다른 앱 등)에 권한을 허가하여
안에 들어있는 `Intent`를 마치 본인 앱의 자체 프로세스에서 실행하는 것처럼 사용하게 하는 것이 목적입니다.

### PendingIntent 주요 사례:
- 사용자가 알림으로 작업을 실행할 때 실행할 인텐트 선언
  (Android 시스템의 `NotificationManger`에서 `Intent` 실행)
- 사용자가 앱 위젯으로 작업을 실행할 때 실행할 인텐트를 선언
  (홈 화면 앱이 `Intent`를 실행)
- 지정된 미래 시간에 실행된 인텐트를 선언
  (Android 시스템의 `AlarmManager` 가 `Intent` 를 실행)

### 사용법
`PendingIntent`의 경우 `startActivity()` 와 같은 호출을 사용하지 않고,
생성자 메서드를 호출하여 `PendingIntent`를 생성할 수 있습니다.

- `Activity`을 시작하는 `Intent`의 `PendingIntent.getActivity()`
- `Service`을 시작하는 `Intent`의 `PendingIntent.getService()`
- `BroadcastReceiver`을 시작하는 `Intent`의 `PendingIntent.getBroadcast()`

PendingIntent 생성시 전달해야하는 정보는 아래와 같습니다.
1. Context
2. requestCode
3. Intent
4. 플래그<br/>
PendingIntent는 동작 방식과 시스템 또는 다른 컴포넌트와의 상호 작용
   방식을 제어하는 다양한 플래그를 지원합니다.
    - `FLAG_UPDATE_CURRENT`: 기존 `PendingIntent`를 새 데이터(Extra Data)로 업데이트
    - `FLAG_CANCEL_CURRENT`: 기존 `PendingIntent`를 취소합니다.
    - `FLAG_IMMUTABLE`: `PendingIntent`를 변경 불가능 하게 만들어 수신자가 수정하는 것을 방지
      - Android 12 (API 레벨 31)부터 변경 가능 flag 여부를 필수로 넣어야합니다.
    - `FLAG_ONE_SHOT`: `PendingIntent`가 한 번만 사용될 수 있도록 보장

 <details>
     <summary>PendingIntent에 대한 공감되는 비유</summary>
Intent: 아침에 일어나 화장실에 가려고 "의도"를 한다고 가정해 보겠습니다.<br/>
먼저 화장실에 가야겠다고 생각해야 하지만, 그것만으로는 화장실에 갈 수 없습니다.<br/>
그러면 뇌에게 "먼저 침대에서 일어나", "화장실로 걸어가", 
"그럼 손을 씻으러 가", "그럼 손을 닦으러 가"라고 말해야 합니다. <br/>
어디로 가야 할지 알게 되면 "시작" 명령을 내리고, 몸은 행동을 시작합니다.

PendingIntent: 앞선 사례를 계속 이어서 보자면, 샤워를 하고 싶은데 양치질 하고<br/>
아침을 먹은 후에 하고 싶다고 가정해보겠습니다. 그러면 최소 30~40분은 지나야 샤워<br/>
할 수 있을 거라는 걸 알고 있습니다. 여전히 옷을 준비하고, 계단을 올라 욕실로 돌아가<br/>
옷을 벗고 샤워를 해야한다는 생각이 머릿속에 있습니다. 하지만 이 모든 것은 30~40분이 지나야<br/>
비로소 시작됩니다. 이제 샤워하려는 "PENDING" 인텐트가 생겼습니다. 30~40분 동안 "PENDING" 상태입니다.

이것이 `PendingIntent`와 `Intent`의 차이입니다. `Intent`는 `PendingIntent` 없이도 생성할 수 있지만, 
`PendingIntent`를 생성하려면 먼저 `Intent`를 설정해야합니다.
</details>

### 실전 질문
Q) PendingIntent란 무엇이며 일반 Intent와 어떻게 다른가요?
PendingIntent 사용이 필요한 시나리오를 제시해 줄 수 있나요?

PendingIntent란 `Intent` 래퍼(wrapper) 로, 앱 외부의 다른 주체(시스템, 다른 앱 등)에 권한을 허가하여
안에 들어있는 `Intent`를 마치 본인 앱의 자체 프로세스에서 실행하는 것처럼 사용하게 하는 것이 목적입니다.

- 사용자가 알림으로 작업을 실행할 때 실행할 인텐트 선언
  (Android 시스템의 `NotificationManger`에서 `Intent` 실행)
- 사용자가 앱 위젯으로 작업을 실행할 때 실행할 인텐트를 선언
  (홈 화면 앱이 `Intent`를 실행)
- 지정된 미래 시간에 실행된 인텐트를 선언
  (Android 시스템의 `AlarmManager` 가 `Intent` 를 실행)
